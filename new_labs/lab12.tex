% LAB 12: Project
%
% CSE/IT 107: Introduction to Programming
% New Mexico Tech
%
% Prepared by Russell White and Christopher Koch and Tyler Cecil
% Fall 2014
\documentclass[11pt]{cselabheader}
\usepackage{multicol,graphicx}
\usepackage{wrapfig}

%%%%%%%%%%%%%%%%%% SET TITLES %%%%%%%%%%%%%%%%%%%%%%%%%
\fancyhead[R]{Lab 12: Project}
\title{Lab 12: Project}

\begin{document}

\maketitle

\hrule
\begin{quotation}
  ``I wanna be the very best,
  
  Like no one ever was.
  
  To catch them is my real test,
  
  To train them is my cause.''
\end{quotation}
\begin{flushright}
--- Pok\'emon Intro Song
\end{flushright}


\begin{quotation}
``So, tell me about yourself. Are you a boy or a girl?''
\end{quotation}
\begin{flushright}
--- Professor Oak
\end{flushright}

\hrule

\section{Introduction}
This will be your final lab for the semester.

\vspace{4in}
How very spooky.


\pagebreak

\section{tkinter}
\label{sec:tk}
tkinter is a basic graphics library for Python. You will be using it as your
user interface for this lab. Due to time reasons, we have not finished a
tutorial for tkinter at this time. Look at the sample code and other online
tutorials, or wait for an updated version of the lab.

We recommend doing the non-tkinter parts of the lab (loading files, handling
socket connections) first in any case.

\pagebreak

\section{Project}
\label{sec:proj}

\begin{warningbox}{Boilerplate}
  Remember that this lab \emph{must} use the
  boilerplate syntax introduced in Lab~5.
\end{warningbox}

For this assignment, you will be creating a multiplayer game similar to the
combat system of the Pok\'emon or Final Fantasy games. You will be writing
two programs, though you are free to have them share some amount of code.
Your two main files should be named battle.py and battle\_server.py, though
you are encouraged to have more than just those two files.

\begin{figure}[h]
  \centering
  \includegraphics{img/Bulbasaur_pokemon_red}
  \caption{Pok\'emon battle screen. (from
    \href{http://en.wikipedia.org/wiki/File:Bulbasaur_pokemon_red.png}{Wikipedia})}
  \label{poke}
\end{figure}

\subsection{Game}
The game you are creating will be a two-player battle game. Each player will
have a ``party'' of monsters. At the start of the match, each player will choose
one of their three monsters to become active. Then a series of turns will occur
until one player's entire party of monsters has been defeated.

\subsubsection{Turns}
\label{subsubsec:turn}
A turn consists of each player choosing one action to perform. The possible
actions fall into two categories: switching the player's active monster or using
a move from the currently active monster.

If a player chooses to switch their active monster, they must then choose from
their current inactive and undefeated monsters. The selected monster will become
active while their current active monster will become inactive.

If a player chooses to use a move from their currently active monster, they will
then choose one of up to four moves that their monster knows.

Once both players have chosen a move for the turn, the moves will be executed.
If both players chose to switch monsters, then the order that the switches occur
does not matter. If one player chose to switch their monster while the other chose
to use a move, then the switching player's action will go first. If both players
choose to use a move, then the player whose monster has a higher Speed stat (see
Section~\ref{subsubsec:monster}) will perform its move first. The second monster
will only perform its move if it is still undefeated after the first monster
performs its move.

If at the end of a turn either or both monsters have had their Health reduced to 0
or less, then that monster has been defeated. Its user must immediately switch out
their monster for one that has not been defeated. This switch occurs before the start
of the next turn. If no undefeated monsters remain, that player has been defeated.
If both players are defeated at once, the match ends in a draw.

\subsubsection{Monsters}
\label{subsubsec:monster}  
Each monster will have a number of stats:
\begin{description}
\item[Attack] Indicates attack power of the monster. The base damage of any attack
  Move that this monster uses is modified by $$base\_damage \cdot \left(1 +
  \frac{attack}{100}\right)$$
\item[Defense] Indicates defensive strength of the monster. Any incoming damage to
  the monster is reduced by $$damage \cdot \left(1 - \frac{defense}{100}\right)$$

  A monster is not allowed to have a Defense greater than 75.
\item[Health] The maximum health that a monster has. Any time it is attacked the
  monster's current health will be reduced, thought the maximum will stay the same.
\item[Speed] Indicates the speed of the monster. Is used to determine which of the
  active monsters will use its Move first.
\item[Name] Each monster must have a name so that you can properly empathize with
  its plight.
\end{description}


In addition to these stats, each monster can have up to 4 moves, as defined in
Section~\ref{subsubsec:moves}

\subsubsection{Moves}
\label{subsubsec:moves}
A Move is an action that a monster can perform when it is active. There are four
types of Move:

\begin{description}
\item[Offensive] An offensive Move deals damage to the opponent's active monster.
  Each offensive Move has a base damage stat that helps determine how much damage it
  does, based on the two formulas in Section~\ref{subsubsec:monster}.
\item[Heal] A healing Move restores health to the monster making the Move. A healing
  Move has a stat indicating how much health it will restore. A monster cannot be
  healed above its maximum health.
\item[Buff] A Move that temporarily increases one of the active monster's stats. A buff move
  has three attributes: the stat it increases (Attack, Defense, or Speed), the
  amount it increases that stat by, and how many turns it lasts. A buff can allow a stat
  to be increased beyond the point it normally could be.
\item[Debuff] A Move that temporarily decreases one of the stats of the opponent's active
  monster. Has the same attributes as buff, but decreases instead of increases.
\end{description}

In addition to the above mentioned attributes, each move must have a name.

\subsection{Client (battle.py)}
You will need to write a client using tkinter that provides a nice user interface
to those playing the game. You should model your interface off of
Figure~\ref{poke}, though you are free to modify it as you see fit. The interface
needs to do the following:
\begin{itemize}
\item Display the name, current health, max health, attack, defense, and speed of the
  currently active monsters from both players.
\item Display information about what is happening in the game. That is, what moves each
  monster is using, what the results of those moves are, what monsters are switched for
\item Allow the user to choose between their various options each turn, as shown in
  Section~\ref{subsubsec:turn}.
\end{itemize}

In addition, your client will need to connect to your server in order to send the
actions of its player and receive the results of each turn. It will also need to
receive information about the opponent's monsters at the start of a game.

When the client is first started, it must load the information about its party
of monsters from a text file. This information must then be sent to the server upon
connection.

\subsection{Server (battle\_server.py)}
You will need to write a server that allows two clients to connect to it in order
to play the game that I really wish I had come up with a name for. This server will
carry out the majority of the game's logic and handle sending and receiving information
from the players. It will need to fulfill the following tasks:

\begin{itemize}
\item Receive information about each player's party, store that information, and
  send it to the players as necessary.
\item Wait for each player to select an action, then calculate the outcome of
  both actions.
\item Detect when one player has won and inform each player.
\item Anything else you find would be handy for the server to take care of.
\end{itemize}

You are free to use whatever protocol you wish for communicating data between the
server and the clients.


\subsection{Extra Credit}
%status effects
%types and strengths/weaknesses
%validate legal monsters
%larger party size
%client lets user select from a list of possible monsters
%randomly generated monsters
%client lets user create monster

\subsection{Terms}

\begin{description}
\item[Active] The current ``fighting'' monster. Each player can only have one
  active monster at a time.
\item[Damage] The amount subtracted from a monster's current health after it is
  attacked. The full formula for damage is $$base\_damage \cdot \left(1 +
  \frac{attack}{100}\right) \cdot \left(1 - \frac{defense}{100}\right)$$
\item[Defeated] A monster that has had its health points reduced to 0. A
  defeated monster cannot be active.
\item[Monster] A mysterious creature that we are using to fight for questionably
  moral reasons. (Section~\ref{subsubsec{monster})
\end{description}


\pagebreak
\section{Submitting}

Files to submit:
\begin{itemize}
\item battle.py (Section~\ref{sec:proj})
\item battle\_server.py (Section~\ref{sec:proj})
\item Any other files created. (Section~\ref{sec:proj})
\end{itemize}

You may submit your code as either a tarball (instructions below) or as a .zip
file. Either one should contain all files used in the exercises for this lab.
The submitted file should be named either
\texttt{cse107\_firstname\_lastname\_lab11.zip} or
\texttt{cse107\_firstname\_lastname\_lab11.tar.gz} depending on which method you
used.

For Windows, use a tool you like to create a \texttt{.zip} file. The TCC
computers should have \texttt{7z} installed. For Linux, look at lab 1 for
instructions on how to create a tarball or use the ``Archive Manager'' graphical
tool.

\begin{center}
  \textbf{Upload your tarball or .zip file to Canvas.}
\end{center}

\end{document}
