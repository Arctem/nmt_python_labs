% LAB 9: Sockets
% 
% CSE/IT 107: Introduction to Programming
% New Mexico Tech
% 
% Prepared by Russell White and Christopher Koch
% Fall 2014
\documentclass[11pt]{cselabheader}
\usepackage{IEEEtrantools}

%%%%%%%%%%%%%%%%%% SET TITLES %%%%%%%%%%%%%%%%%%%%%%%%%
\fancyhead[R]{Lab 9: Sockets}
\title{Lab 9: Sockets}

\begin{document}

\maketitle

\hrule
\begin{quotation}
``Today, most software exists not to solve a problem, but to interface with other
software.''
\end{quotation}
\begin{flushright}
--- Ian O. Angell
\end{flushright}

\begin{quotation}
``Computer Science is no more about computers than astronomy is about
telescopes.''
\end{quotation}
\begin{flushright}
--- Edsger W. Dijkstra
\end{flushright}

\begin{quotation}
``If people never did silly things, nothing intelligent would ever get done.''
\end{quotation}
\begin{flushright}
--- Ludwig Wittgenstein
\end{flushright}

\hrule

\section{Introduction}

\pagebreak
\section{Sockets}
\label{sec:sock}

\pagebreak

\section{Exercises}
\label{sec:ex}

\begin{warningbox}{Boilerplate}
  Remember that this lab \emph{must} use the
  boilerplate syntax introduced in Lab~5.
\end{warningbox}

\begin{description}
\item[rps.py] Write a program that connects to the server running at
  104.131.56.87 port 50001 and plays a game of rock, paper, scissors. The server
  will send the following messages:

  \begin{description}
    \item[name] Next message sent will be your client's display name.
    \item[taken] The name sent is already in use. Repeat sending a name.
    \item[wait] Game has not yet been found (waiting for another player). No
      response required.
    \item[opponent <name>] A game has been found. The opponent's name will be
      inserted for ``<name>''. No response required.
    \item[play] The next message sent should consist solely of ``r'', ``p'', or
      ``s'', depending on whether you wish to play rock, paper, or scissors.
    \item[tie] Your opponent played the same as you, causing a tie. No response
      required.
    \item[win] Your play beat your opponent's, so you won. The next
      message should consist solely of ``y'' or ``n'', indicating your desire to
      play again.
    \item[lose] Your opponent's play beat yours, so you lost. The next message
      should consist solely of ``y'' or ``n'', indicating your desire to play
      again.  
    \item[disconnect] Your opponent disconnected at an unexpected time.  The
      next message should consist solely of ``y'' or ``n'', indicating your
      desire to find a new opponent.
    \item[again] The next message should consist solely of ``y'' or ``n'',
      indicating your desire to play again. This message will only occur if
      invalid input is given for ``win'', ``lose'', or ``disconnect'', so if
      you can be sure that will not occur you do not necessarily need this
      case.
  \end{description}

  Every message sent will be terminated with a ``\textbackslash{}n''. Every message you send
  should be terminated with a ``\textbackslash{}n''. It is possible when you read from a socket
  that you receive multiple commands at once, or less than a full command. Check
  for ``\textbackslash{}n'' to know where each command ends. If you receive part of a command, you
  will have to store that partial command until you get the rest of it.

  For each of these server responses, you need to display an appropriate message
  with a prompt for input if appropriate. For example, a ``win'' message might
  output ``Congratulations, you beat <otherplayer>! Do you want to play again?''

\item[maze.py] Write a program that connects to the server running at 104.131.56.87 port 50002
  and automatically navigates a maze generated by the server. The first message you send should be
  your display name (used for the leaderboard). The server will then randomly generate a 10x10
  maze that you must navigate. You will always begin in the top left corner of the maze, facing
  down. You must navigate to the bottom right corner.

  The server will send the following messages:

  \begin{description}
  \item[<left> <forward> <right>] Three space-separated numbers. The first is the number of open
    spaces to your left, the second is the number of open spaces in front of you, and the last is
    the number of open spaces to your right.
  \item[invalid] Sent if the last message you sent was not a valid message or the movement you
    attempted was not possible (such as attempting to move forward into a wall).
  \item[win <steps> <time>] The word ``win'' followed by an integer, then a floating point,
    all space-separated. This indicates you have successfully reached the bottom right corner of
    the maze. After this message is sent, the server will close its end of the socket.
  \end{description}

  The valid messages you can send (after the initial message indicating your name):

  \begin{description}
  \item[forward] Attempt to move one space in the direction you are currently facing.
  \item[backward] Attempt to move one space opposite the direction you are currently facing.
  \item[left] Turn left $90^{\circ}$.
  \item[right] Turn right $90^{\circ}$.
  \end{description}

  Your program's only input should be the desired display name (though you are free to hardcode
  that if you wish). Otherwise, your program should navigate the maze on its own. You are free
  to have any output that you wish to help you get a sense of how your program is doing in
  navigating the maze, though you MUST print out the stats it receives on successful completion of
  the maze (total steps and time taken).

  If you connect to the server on port 50003, it will send you the leaderboard of fastest times
  measured in steps. A simple way to do this in the cmd line is to run
  \lstinline{nc 104.131.56.87 50003}.

  If you connect to the server on port 50004, it will send you the leaderboard of fastest times
  measured in seconds. A simple way to do this in the cmd line is to run
  \lstinline{nc 104.131.56.87 50004}.
  
\end{description}

\pagebreak
\section{Submitting}

Files to submit:
\begin{itemize}
\item rps.py (Section~\ref{sec:ex})
\item maze.py (Section~\ref{sec:ex})
\end{itemize}

You may submit your code as either a tarball (instructions below) or as a .zip
file. Either one should contain all files used in the exercises for this lab.
The submitted file should be named either
\texttt{cse107\_firstname\_lastname\_lab9.zip} or
\texttt{cse107\_firstname\_lastname\_lab9.tar.gz} depending on which method you
used.

For Windows, use a tool you like to create a \texttt{.zip} file. The TCC
computers should have \texttt{7z} installed. For Linux, look at lab 1 for
instructions on how to create a tarball or use the ``Archive Manager'' graphical
tool.

\begin{center}
  \textbf{Upload your tarball or .zip file to Canvas.}
\end{center}

\end{document}
